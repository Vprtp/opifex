<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Opifex - Manual</title>
    <style>
        body {
            box-sizing: border-box;
            min-width: 200px;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
        }
        
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; max-width: 800px; margin: 0 auto; padding: 20px; }
h1, h2, h3, h4, h5, h6 { margin-top: 24px; margin-bottom: 16px; font-weight: 600; line-height: 1.25; }
h1 { font-size: 2em; border-bottom: 1px solid #eee; padding-bottom: 0.3em; }
h2 { font-size: 1.5em; border-bottom: 1px solid #eee; padding-bottom: 0.3em; }
code { background: #f6f8fa; padding: 2px 4px; border-radius: 3px; font-size: 110%;}
pre { background: #f6f8fa; padding: 16px; border-radius: 6px; overflow: auto; }
pre code { background: none; padding: 0; }
blockquote { margin: 0; padding-left: 16px; border-left: 4px solid #ddd; color: #666; }
table { border-collapse: collapse; width: 100%; }
th, td { border: 1px solid #ddd; padding: 8px 12px; text-align: left; }
th { background: #f6f8fa; font-weight: 600; }

    </style>
</head>
<body class="markdown-body">
    <div class="markdown-heading"><h1 class="heading-element">Opifex</h1><a id="user-content-opifex" class="anchor" aria-label="Permalink: Opifex" href="#opifex"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Manual for version <code>0.1.3</code>.</p>
<p><a href="source/img/logo.png"></a></p><div><a target="_blank" rel="noopener noreferrer" href="source/img/logo.png"><img src="source/img/logo.png" width="200" style="max-width: 100%;"></a></div><p></p>
<p><em>Opifex</em> is a modular tool designed for automated content creation (videos, images, texts, audios, and more, depending on which modules are installed and used).</p>
<div class="markdown-heading"><h2 class="heading-element">Installation</h2><a id="user-content-installation" class="anchor" aria-label="Permalink: Installation" href="#installation"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>After downloading the repository, Opifex can be properly set up by running <code>bash install.sh</code> in the main directory.</p>
<p>The script will download various assets that are used by the program (or by the default modules) that are too heavy to be hosted on GitHub and it will set up a <em>Conda</em> environment for the program (based on <code>environment.yml</code>), as well as install Conda (precisely <em>Miniconda3</em>) if no Conda version was found on the system.<br>
Opifex requires this environment to function properly, as some Conda-exclusive programs (such as <em>Montreal Forced Aligner</em>) are being used.</p>
<p>Opifex can then be started by running <code>bash main.sh</code> in the main directory.</p>
<p>(In both cases, please <strong>avoid</strong> running the scripts in other methods, for example <code>./main.sh</code>, since this way of execution might cause problems.)</p>
<p>So, as of now, <strong>Opifex runs exclusively on Linux</strong>.<br>
Also, the installer script currently only supports Debian-based distributions (or any distribution running <em>APT</em>): Opifex is still supported for other distributions, but it requires manual installation.</p>
<div class="markdown-heading"><h2 class="heading-element">Modules</h2><a id="user-content-modules" class="anchor" aria-label="Permalink: Modules" href="#modules"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<div class="markdown-heading"><h3 class="heading-element">What are modules?</h3><a id="user-content-what-are-modules" class="anchor" aria-label="Permalink: What are modules?" href="#what-are-modules"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p><strong>Modules</strong> are independent pieces of code, each with a specific function, that can be executed through Opifex.<br>
Modules are Python scripts that can be found in the <code>modules</code> directory and that contain the <code>basemodule.BaseModule</code> class.<br>
They are imported upon startup and can be executed, with proper parameters, using <code>modules.executeModule()</code>, returning a class of type <code>basemodule.ModuleResultType</code>.</p>
<p>Based on this, in reality, the main program (for now) still just works as a layer for the user to call and interact with modules, which actually do the content creation operations.</p>
<p><strong>Be careful</strong> when you download modules made by other people!<br>
By executing a module, you will be running code on your machine like any other program, so be certain that the downloaded script doesn't contain any malicious code.</p>
<div class="markdown-heading"><h3 class="heading-element">Default modules</h3><a id="user-content-default-modules" class="anchor" aria-label="Permalink: Default modules" href="#default-modules"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Many modules are already part of Opifex by default, but everyone is free to write their own modules or download other community-made modules, by just placing them inside the <code>modules</code> directory. Here is a list of the preinstalled modules:</p>
<table>
<thead>
<tr>
<th><strong>Module name</strong></th>
<th><strong>File name</strong></th>
<th><strong>Description</strong></th>
<th><strong>Required parameters</strong></th>
<th><strong>Returned values</strong></th>
<th><strong>Dependencies</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Aligner</td>
<td>alignSRT.py</td>
<td>Module for generating subtitles from a given audio and its transcript.</td>
<td>audio-(str) transcript-(str) output-(str)</td>
<td>textgridOutput-(str) srtOutput-(str)</td>
<td>/</td>
</tr>
<tr>
<td>RSS</td>
<td>rss_handler.py</td>
<td>Module to fetch info from an RSS feed and its individual articles.</td>
<td>feedURL-(str) getFullArticle-(bool)</td>
<td>feedInfo-(dict)</td>
<td>/</td>
</tr>
<tr>
<td>Reddit</td>
<td>reddit.py</td>
<td>Module for fetching reddit posts.</td>
<td>url-(str) upvotesMin-(float) wordsMin-(int) checkMax-(int)</td>
<td>title-(str) description-(str) upvotes-(int) comments-(list)</td>
<td>Screenshot</td>
</tr>
<tr>
<td>RedditVideoGenerator</td>
<td>reddit_video_generator.py</td>
<td>Module that generates a video, or multiple videos, based on the content contained in a given Reddit post. Returns paths to the generated videos (list of size 1 when only one video is generated)</td>
<td>url-(str) commentsOrDesc-(bool) accountName-(str)</td>
<td>paths-(list)</td>
<td>Reddit SimpleVideoGenerator URLunshortener</td>
</tr>
<tr>
<td>Screenshot</td>
<td>screenshot.py</td>
<td>Module that screenshots an HTML template with given parameter values to fill it and cleans it to be a transparent PNG. Returns the path to the generated image.</td>
<td>template-(str) data-(dict) size-(tuple)</td>
<td>destination-(str)</td>
<td>/</td>
</tr>
<tr>
<td>SimpleVideoGenerator</td>
<td>simple_video_generator.py</td>
<td>Module that generates videos based on a given title and text. Returns paths to the generated videos (list of size 1 when only one video is generated)</td>
<td>content-(dict) accountName-(str)</td>
<td>paths-(list)</td>
<td>TTS Aligner VideoGenerator</td>
</tr>
<tr>
<td>TTS</td>
<td>tts.py</td>
<td>Module for generating speech from a given title and text.</td>
<td>title-(str) text-(str)</td>
<td>titleDestination-(str) textDestination-(str)</td>
<td>/</td>
</tr>
<tr>
<td>URLunshortener</td>
<td>unshortenURL.py</td>
<td>Module that returns the final URL from redirections by a given one (thus 'unshortening' shortened URLs)</td>
<td>url-(str) rmpars-(bool)</td>
<td>url-(str)</td>
<td>/</td>
</tr>
<tr>
<td>VideoGenerator</td>
<td>video.py</td>
<td>Module for generating a video based on given title, subtitles, audio for both title and text, and a destination path.</td>
<td>title-(str) subtitles-(str) titleAudio-(str) textAudio-(str) destination-(str)</td>
<td>/</td>
<td>/</td>
</tr>
</tbody>
</table>
<div class="markdown-heading"><h3 class="heading-element">Creating modules</h3><a id="user-content-creating-modules" class="anchor" aria-label="Permalink: Creating modules" href="#creating-modules"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Creating modules is simple: all you have to do is write a Python script that does what you want it to do and attach a personalized <code>basemodule.BaseModule</code> class at the end of it, so that it can be recognized by Opifex.<br>
Be careful to put all your code in functions: anything outside them will be run when loading the module, because they are being imported as Python libraries.</p>
<pre><code>class BaseModule:
    def __init__(self):
        self.name = ABC
        self.description = ABC
        self.requiredArgs:List[Tuple[str,type]] = ABC #list of required parameters as (name, type) pairs
        self.returnedDataTypes:List[Tuple[str,type]] = ABC #list of returned key values and respective data types in returned data dict of ModuleResultType
        self.dependencies:List[str] = ABC #list of "dependencies" (other plugins' name) required for the plugin to work

    def __str__(self):
        return f"Module &lt;{self.name}&gt;: {self.description.split("\n")[0]}" #prints first line of description, which should always be just the summary. hopefully.
    
    @abstractmethod
    def execute(self, version:str, **kwargs) -&gt; ModuleResultType: #version is the program version, it should be passed automatically by modules.executeModule()
        """Execute the module and return results"""
        pass
</code></pre>
<p><code>YourModule.execute()</code> must return a variable of type <code>basemodule.ModuleResultType</code>, which will contain information about possible execution errors and data returned by the module:</p>
<pre><code>class ModuleResultType:
    def __init__(self, exception:Exception|None, data:Dict[str, Any]):
        self.exception = exception
        self.data = data
    
    def __str__(self):
        return f"ModuleResultType: exception &lt;{str(self.exception)}&gt; data &lt;{str(self.data)}&gt;"
</code></pre>
<div class="markdown-heading"><h2 class="heading-element">GUI mode</h2><a id="user-content-gui-mode" class="anchor" aria-label="Permalink: GUI mode" href="#gui-mode"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Opifex can run in an intuitive <strong>GUI mode</strong>:</p>
<p><a href="source/img/opifex-gui.png"></a></p><div><a target="_blank" rel="noopener noreferrer" href="source/img/opifex-gui.png"><img src="source/img/opifex-gui.png" width="600" style="max-width: 100%;"></a></div><p></p>
<p>The interface is divided in specialized sections:</p>
<ul>
<li>On the left, there's a list of all loaded <strong>modules</strong>. Each module can be inspected by <em>double clicking</em>. Modules can be reloaded by pressing the <code>Reload</code> button.</li>
<li>On the right, details of the <strong>selected module</strong> are displayed. You can <em>execute</em> the selected module by pressing the <code>Execute</code> button, after having provided all of the selected module's parameters.</li>
<li>On the bottom, a <strong>console</strong> shows all output from modules and Opifex itself (after startup, all <code>stdout</code> and <code>stderr</code> calls get redirected here).</li>
<li>On the top, a <strong>toolbar</strong> allows you to have quick access to the <em>configurations file</em>, to this page and to a quick <em>info page</em>.</li>
</ul>
<p>Output from <strong>executed modules</strong> will be printed to console (at least for now).</p>
<div class="markdown-heading"><h2 class="heading-element">Settings</h2><a id="user-content-settings" class="anchor" aria-label="Permalink: Settings" href="#settings"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Settings for Opifex can be changed in the <code>config.py</code> file, which can be easily accessed from the <code>Config</code> button in GUI mode's toolbar.</p>
<p>Opifex <strong>must be restarted</strong> after any changed setting for the changes to have effect.</p>
<p>The configurations file is structured in these parts:</p>
<ul>
<li>At the beginning, a few lines of code allow dynamic path detection. Do <strong>not</strong> modify this part. <strong>Remember</strong> to append the variable <code>p</code> at the beginning of a path string, if the given path is relative (not absolute).</li>
<li>Then, some variables define some general characteristics about the Opifex program.</li>
<li>Lastly, many variables used by built-in modules are defined. Modify these variables <strong>only</strong> if you know what you're doing.</li>
</ul>
<p>The following settings are the ones you might be interested in changing the most.</p>
<div class="markdown-heading"><h3 class="heading-element">Window size</h3><a id="user-content-window-size" class="anchor" aria-label="Permalink: Window size" href="#window-size"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<pre><code>windowSize:tuple[int,int] = (1000,800)
</code></pre>
<p>Size of the Opifex window in GUI mode upon startup (in pixels, width and height).</p>
<div class="markdown-heading"><h3 class="heading-element">GUI Themes</h3><a id="user-content-gui-themes" class="anchor" aria-label="Permalink: GUI Themes" href="#gui-themes"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<pre><code>style:str = p+"source/qt/light.qss"
</code></pre>
<p>Path to the stylesheet used for Opifex in GUI mode. Any stylesheet can be used, as long as it's in the Qt Stylesheet format.</p>
<p>These are the available stylesheets in a standard Opifex installation:</p>
<ul>
<li>
<code>source/qt/light.qss</code> - light theme (default)</li>
<li>
<code>source/qt/dark.qss</code> - dark theme</li>
<li>
<code>source/qt/none.qss</code> - no custom theme, fallback to the default Qt style</li>
</ul>
<div class="markdown-heading"><h3 class="heading-element">Localization settings</h3><a id="user-content-localization-settings" class="anchor" aria-label="Permalink: Localization settings" href="#localization-settings"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>Currently, Opifex has not been translated to any language other than English <strong>yet</strong>. However, there are still some module settings which should be changed if you desire to use such modules in another language.</p>
<pre><code>piperModel:str = sourceFolder+"voice/en_US-lessac-medium.onnx"
alignerDict:str = sourceFolder+"aligner/english_us_mfa.dict"
alignerModel:str = sourceFolder+"aligner/english_mfa"
</code></pre>
<p>These variables contain paths to models and dictionaries for the <em>TTS</em> module (which uses the software <em>PiperTTS</em>) and for the <em>Aligner</em> module (which uses <em>Montral Forced Aligner</em>). <strong>Only</strong> the English files for these programs are bundled with Opifex, but you can download models for other languages from their respective websites (<a href="https://huggingface.co/rhasspy/piper-voices/tree/main" rel="nofollow">Piper</a>, <a href="https://github.com/MontrealCorpusTools/mfa-models">MFA</a>). Refer to their documentations for troubleshooting.</p>
<div class="markdown-heading"><h2 class="heading-element">Credits and info</h2><a id="user-content-credits-and-info" class="anchor" aria-label="Permalink: Credits and info" href="#credits-and-info"><span aria-hidden="true" class="octicon octicon-link"></span></a></div>
<p>All code for Opifex has been written by <strong>prtp</strong> (<a href="https://github.com/Vprtp">Vprtp</a> on GitHub).<br>
Opifex is distributed under the <a href="LICENSE">GNU GPL v3</a> license.<br>
To function properly, Opifex uses the following libraries/software (which are included with the installation of this program):</p>
<ul>
<li>
<em>PyQt6</em> for its graphic functionalities</li>
<li>
<em>PiperTTS</em> for text-to-speech</li>
<li>
<em>Montreal Forced Aligner</em> to align the generated TTS with its transcript and create a subtitles file</li>
<li>
<em>FFmpeg</em> to edit and compose videos</li>
<li>
<em>Selenium</em> to capture web pages</li>
</ul>
<p>Opifex (from the Latin for "artisan" or "manufacturer") is a hobby project, so please be aware it may not yet be production-grade software. However, I still plan to add a lot of other things to it in future: first of all, a slighly more user-friendly GUI, then a CLI mode, tons of other modules, and all of this just for the "single" mode (which runs entirely on the main machine). So, most importantly, I plan to add a "master" mode that offloads processing to multiple machines running in "worker" mode, effectively turning Opifex into a sort of "content farm" software.</p>
<p>Thanks for your attention.</p>

</body>
</html>